<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> كويزاتي </title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #FF7B00;
      --primary-light: #ffffff;
      --primary-dark: #D45A00;
      --secondary: #4A5568;
      --light: #FFF5EB;
      --dark: #2D3748;
      --success: #38A169;
      --danger: #E53E3E;
      --border-radius: 16px;
      --box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      direction: rtl;
      background: linear-gradient(135deg, #FFF5EB 0%, #FFE4CC 100%);
      padding: 15px;
      line-height: 1.6;
      color: var(--dark);
      min-height: 100vh;
    }
    
    .container {
      max-width: 100%;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      margin-bottom: 25px;
      padding: 20px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      position: relative;
      overflow: hidden;
    }
    
    header::before {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 60%);
      transform: rotate(30deg);
    }
    
    header h1 {
      font-size: 1.6rem;
      margin-bottom: 5px;
      position: relative;
    }
    
    header p {
      font-size: 0.9rem;
      opacity: 0.9;
      position: relative;
    }
    
    .search-container {
      margin: 20px 0;
      position: relative;
    }
    
    .search-input {
      width: 100%;
      padding: 15px 50px 15px 15px;
      border: 2px solid var(--primary-light);
      border-radius: var(--border-radius);
      font-size: 1rem;
      box-shadow: var(--box-shadow);
      transition: all 0.3s ease;
    }
    
    .search-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(255, 123, 0, 0.3);
    }
    
    .search-icon {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--primary);
      font-size: 1.2rem;
    }
    
    .box {
      background: #fff;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      transition: transform 0.3s ease;
      border: 2px solid var(--primary-light);
    }
    
    .box:hover {
      transform: translateY(-5px);
    }
    
    h2, h3 {
      margin: 0 0 15px 0;
      color: var(--primary-dark);
      display: flex;
      align-items: center;
      position: relative;
      padding-bottom: 10px;
    }
    
    h2::after, h3::after {
      content: "";
      position: absolute;
      bottom: 0;
      right: 0;
      width: 60px;
      height: 3px;
      background: var(--primary);
      border-radius: 3px;
    }
    
    h2 i, h3 i {
      margin-left: 10px;
      color: var(--primary);
    }
    
    .student-details {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    
    .detail-item {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px dashed #eee;
      align-items: center;
    }
    
    .detail-item:last-child {
      border-bottom: none;
    }
    
    .detail-label {
      font-weight: bold;
      color: var(--primary-dark);
      display: flex;
      align-items: center;
    }
    
    .detail-label i {
      margin-left: 8px;
      color: var(--primary);
    }
    
    .quiz-cards-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .quiz-card {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      overflow: hidden;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      cursor: pointer;
    }
    
    .quiz-card:hover {
      transform: translateY(-5px);
      border-color: var(--primary);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }
    
    .quiz-card-header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      padding: 15px;
      text-align: center;
    }
    
    .quiz-card-body {
      padding: 15px;
    }
    
    .quiz-card-title {
      font-weight: bold;
      font-size: 1.1rem;
      margin-bottom: 10px;
      color: var(--primary-dark);
    }
    
    .quiz-card-details {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    
    .quiz-card-score {
      font-weight: bold;
      font-size: 1.2rem;
      color: var(--primary);
    }
    
    .quiz-card-status {
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: bold;
    }
    
    .status-completed {
      background: rgba(56, 161, 105, 0.15);
      color: var(--success);
    }
    
    .status-pending {
      background: rgba(255, 154, 64, 0.15);
      color: var(--primary);
    }
    
    .quiz-card-progress {
      height: 8px;
      background: #E2E8F0;
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }
    
    .quiz-card-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-light) 0%, var(--primary) 100%);
      border-radius: 10px;
    }
    
    .quiz-details {
      display: none;
      margin-top: 30px;
    }
    
    .quiz-result {
      text-align: center;
      margin-bottom: 20px;
      padding: 20px;
      background: var(--light);
      border-radius: var(--border-radius);
      font-size: 1.2rem;
      border: 2px dashed var(--primary-light);
    }
    
    .score {
      font-weight: bold;
      font-size: 2rem;
      color: var(--primary-dark);
      display: block;
      margin-top: 10px;
    }
    
    .progress-container {
      height: 12px;
      background: #E2E8F0;
      border-radius: 10px;
      overflow: hidden;
      margin: 15px 0;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-light) 0%, var(--primary) 100%);
      border-radius: 10px;
      transition: width 1s ease;
    }
    
    .stats-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: 20px;
    }
    
    .stat-box {
      background: var(--light);
      padding: 15px;
      border-radius: var(--border-radius);
      text-align: center;
      border: 1px solid var(--primary-light);
    }
    
    .stat-number {
      font-size: 1.8rem;
      font-weight: bold;
    }
    
    .stat-correct {
      color: var(--success);
    }
    
    .stat-wrong {
      color: var(--danger);
    }
    
    .stat-label {
      font-size: 0.9rem;
      color: var(--secondary);
    }
    
    .questions-container {
      margin-top: 20px;
    }
    
    .question-item {
      padding: 15px;
      margin-bottom: 25px;
      border-radius: var(--border-radius);
      border: 1px solid #E2E8F0;
      display: flex;
      flex-direction: column;
    }
    
    .question-item.correct {
      background: rgba(56, 161, 105, 0.08);
      border-color: rgba(56, 161, 105, 0.3);
    }
    
    .question-item.wrong {
      background: rgba(229, 62, 62, 0.08);
      border-color: rgba(229, 62, 62, 0.3);
    }
    
    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px dashed #E2E8F0;
    }
    
    .question-title {
      font-weight: bold;
      color: var(--secondary);
      font-size: 1.1rem;
    }
    
    .question-status {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: bold;
    }
    
    .status-correct {
      background: rgba(56, 161, 105, 0.15);
      color: var(--success);
    }
    
    .status-wrong {
      background: rgba(229, 62, 62, 0.15);
      color: var(--danger);
    }
    
    .question-image-container {
      width: 100%;
      margin-bottom: 15px;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid #E2E8F0;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .question-image-container img {
      width: 100%;
      height: auto;
      display: block;
    }
    
    .question-answers {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      background: var(--light);
      padding: 15px;
      border-radius: var(--border-radius);
    }
    
    .answer-row {
      display: flex;
      justify-content: space-between;
      padding: 12px;
      border-radius: 8px;
      background: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    
    .answer-label {
      font-weight: bold;
      color: var(--secondary);
    }
    
    .answer-value {
      font-weight: bold;
      padding: 4px 10px;
      border-radius: 6px;
    }
    
    .answer-correct {
      background: rgba(56, 161, 105, 0.15);
      color: var(--success);
    }
    
    .answer-wrong {
      background: rgba(229, 62, 62, 0.15);
      color: var(--danger);
      text-decoration: line-through;
    }
    
    .back-button {
      display: inline-block;
      margin-bottom: 20px;
      padding: 10px 20px;
      background: var(--primary);
      color: white;
      border-radius: var(--border-radius);
      text-decoration: none;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .back-button:hover {
      background: var(--primary-dark);
      transform: translateX(-5px);
    }
    
    footer {
      text-align: center;
      margin-top: 30px;
      padding: 20px;
      color: var(--secondary);
      font-size: 0.9rem;
      border-top: 1px solid var(--primary-light);
    }
    
    .logo {
      font-weight: bold;
      color: var(--primary);
      font-size: 1.1rem;
      margin-top: 10px;
    }
    
    /* تصميم متجاوب للهواتف */
    @media (max-width: 768px) {
      .student-details {
        grid-template-columns: 1fr;
      }
      
      .stats-container {
        grid-template-columns: 1fr;
      }
      
      .quiz-cards-container {
        grid-template-columns: 1fr;
      }
      
      h2 {
        font-size: 1.3rem;
      }
      
      .quiz-result {
        font-size: 1rem;
      }
      
      .score {
        font-size: 1.6rem;
      }
      
      .question-answers {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      
      .box {
        padding: 15px;
      }
      
      .detail-item {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .detail-item span:first-child {
        margin-bottom: 5px;
      }
      
      .question-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .question-status {
        margin-top: 8px;
      }
      
      .question-title {
        font-size: 1rem;
      }
    }
    
    /* تحسينات للوضع الليلي */
    @media (prefers-color-scheme: dark) {
      body {
        background: linear-gradient(135deg, #c0c1c2 100%);
        color: #EDF2F7;
      }
      
      .box {
        background: #2D3748;
        color: #EDF2F7;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        border-color: var(--primary-dark);
      }
      
      .detail-label {
        color: var(--primary-light);
      }
      
      .quiz-result {
        background: #4A5568;
      }
      
      .stat-box {
        background: #4A5568;
      }
      
      .quiz-card {
        background: #2D3748;
        color: #EDF2F7;
      }
      
      .quiz-card-title {
        color: var(--primary-light);
      }
      
      .question-item {
        border-color: #4A5568;
      }
      
      .question-item.correct {
        background: rgba(56, 161, 105, 0.15);
      }
      
      .question-item.wrong {
        background: rgba(229, 62, 62, 0.15);
      }
      
      .question-answers {
        background: #4A5568;
      }
      
      .answer-row {
        background: #2D3748;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-graduation-cap"></i> نتائج الكوز</h1>
      <p>نظام متابعة وتقييم الكوزات </p>
    </header>
    
    
    <div class="search-container">
      <input type="text" id="searchInput" class="search-input" placeholder="ابحث عن كويز معين...">
      <div class="search-icon"><i class="fas fa-search"></i></div>
    </div>
    
    <h2><i class="fas fa-layer-group"></i> الكويزات المتاحة</h2>
    <div class="quiz-cards-container" id="quizCardsContainer"></div>
    
    <div id="quizDetails" class="quiz-details"></div>
    
    
  </div>

  <script>
    // ⚡ بيانات تجريبية مع عدة كويزات
   

    // هنا بنجيب البيانات من localStorage (لو موجودة)
    let quizData = localStorage.getItem("quizStatus");
    if (quizData) {
      quizData = JSON.parse(quizData);
    } else {
      quizData = sampleData; // للتجربة
    }



    // عرض البطاقات
    function renderQuizCards() {
      const quizCardsContainer = document.getElementById('quizCardsContainer');
      let cardsHTML = '';
      
      for (let lectureName in quizData) {
        if (lectureName !== 'governorate' && lectureName !== 'grade' && 
            lectureName !== 'name' && lectureName !== 'studentId' && 
            lectureName !== 'studentPhone' && lectureName !== 'parentPhone' && 
            lectureName !== 'school') {
          
          const lecture = quizData[lectureName];
          const progressPercentage = lecture.total > 0 ? (lecture.score / lecture.total) * 100 : 0;
          
          cardsHTML += `
            <div class="quiz-card" data-lecture="${lectureName}">
              <div class="quiz-card-header">
                <div class="quiz-card-title">${lectureName}</div>
              </div>
              <div class="quiz-card-body">
                <div class="quiz-card-details">
                  <div class="quiz-card-score">${lecture.score}/${lecture.total}</div>
                  <div class="quiz-card-status ${lecture.solved ? 'status-completed' : 'status-pending'}">
                    ${lecture.solved ? 'مكتمل' : 'غير مكتمل'}
                  </div>
                </div>
                <div class="quiz-card-progress">
                  <div class="quiz-card-progress-bar" style="width: ${progressPercentage}%"></div>
                </div>
              </div>
            </div>
          `;
        }
      }
      
      quizCardsContainer.innerHTML = cardsHTML;
      
      // إضافة event listeners للبطاقات
      document.querySelectorAll('.quiz-card').forEach(card => {
        card.addEventListener('click', function() {
          const lectureName = this.getAttribute('data-lecture');
          showQuizDetails(lectureName);
        });
      });
    }
    
    // عرض تفاصيل الكويز
    function showQuizDetails(lectureName) {
      const lecture = quizData[lectureName];
      
      let correctCount = 0;
      let wrongCount = 0;
      
      let questionsHTML = "";
      for (let question in lecture.answers) {
        let q = lecture.answers[question];
        if (q.isCorrect) correctCount++;
        else wrongCount++;
        
        questionsHTML += `
          <div class="question-item ${q.isCorrect ? 'correct' : 'wrong'}">
            <div class="question-header">
              <div class="question-title">${question}</div>
              <div class="question-status ${q.isCorrect ? 'status-correct' : 'status-wrong'}">
                ${q.isCorrect ? 'إجابة صحيحة' : 'إجابة خاطئة'}
              </div>
            </div>
            <div class="question-image-container">
              <img src="${q.img}" alt="${question}">
            </div>
            <div class="question-answers">
              <div class="answer-row">
                <span class="answer-label">إجابتك:</span>
                <span class="answer-value ${q.isCorrect ? 'answer-correct' : 'answer-wrong'}">${q.chosen}</span>
              </div>
              <div class="answer-row">
                <span class="answer-label">الإجابة الصحيحة:</span>
                <span class="answer-value answer-correct">${q.correctAnswer}</span>
              </div>
            </div>
          </div>
        `;
      }

      const progressPercentage = lecture.total > 0 ? (lecture.score / lecture.total) * 100 : 0;
      
      document.getElementById('quizCardsContainer').style.display = 'none';
      document.getElementById('searchInput').style.display = 'none';
      document.querySelector('h2').style.display = 'none';
      
      document.getElementById('quizDetails').innerHTML = `
        <div class="back-button" id="backButton">
          <i class="fas fa-arrow-right"></i> العودة إلى قائمة الكويزات
        </div>
        <div class="box">
          <h2><i class="fas fa-book"></i> ${lectureName}</h2>
          
          <div class="quiz-result">
            <p>النتيجة النهائية</p>
            <span class="score">${lecture.score} / ${lecture.total}</span>
            
            <div class="progress-container">
              <div class="progress-bar" style="width: ${progressPercentage}%"></div>
            </div>
            
            <p>${progressPercentage >= 60 ? 'ممتاز! احسنت الأداء' : ' تحتاج إلى مزيد من المذاكرة'}</p>
          </div>
          
          <div class="stats-container">
            <div class="stat-box">
              <div class="stat-number stat-correct">${correctCount}</div>
              <div class="stat-label">إجابات صحيحة</div>
            </div>
            <div class="stat-box">
              <div class="stat-number stat-wrong">${wrongCount}</div>
              <div class="stat-label">إجابات خاطئة</div>
            </div>
          </div>
          
          <h3><i class="fas fa-question-circle"></i> تفاصيل الأسئلة</h3>
          <div class="questions-container">
            ${questionsHTML}
          </div>
        </div>
      `;
      
      document.getElementById('quizDetails').style.display = 'block';
      
      // إضافة event listener للزر الرجوع
      document.getElementById('backButton').addEventListener('click', function() {
        document.getElementById('quizDetails').style.display = 'none';
        document.getElementById('quizDetails').innerHTML = '';
        document.getElementById('quizCardsContainer').style.display = 'grid';
        document.getElementById('searchInput').style.display = 'block';
        document.querySelector('h2').style.display = 'flex';
      });
    }
    
    // البحث عن الكويزات
    document.getElementById('searchInput').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      const cards = document.querySelectorAll('.quiz-card');
      
      cards.forEach(card => {
        const lectureName = card.getAttribute('data-lecture').toLowerCase();
        if (lectureName.includes(searchTerm)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });
    
    // تهيئة الصفحة
    renderQuizCards();
  </script>
</body>
</html>