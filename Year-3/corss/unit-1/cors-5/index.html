  <!DOCTYPE html>
  <html lang="ar">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="logo.png" type="image/png">
    <title>Ø§Ù„Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ù‡ Ø§Ù„Ø®Ø§Ù…Ø³Ù‡</title>
  </head>
  <body>

  <header>
    <div class="logo-container">
      <a href="https://mr-abdalla.pages.dev/profile/index.html"><img loading="lazy" class="logo" src="logo.png" alt="logo"></a>
    </div>
  </header>

  <!-- ØªÙØ¹ÙŠÙ„ -->
  <div class="container" id="activationSection">
      <img loading="lazy" class="img" src="5-3.jpg" >
      <h2>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ù‡</h2>
      <div class="label"> <span id="fixedCourseName">Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ù‡ Ø§Ù„Ø®Ø§Ù…Ø³Ù‡ - Ø§Ù„Ù‚Ø¯Ø±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨ÙŠØ©</span></div>
      <input type="text" id="courseCode" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„" />
      <button onclick="activateCourse()">ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³</button>
      <div id="msg"></div>

      <div class="add">
        <a href="http://wa.me/201229369115?text= Ø·Ù„Ø¨ ÙƒÙˆØ¯ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ù‡ Ø§Ù„Ø®Ø§Ù…Ø³Ù‡ ØªÙ„ØªØ§ Ø«Ø§Ù†ÙˆÙŠ">Ø§Ø·Ù„Ø¨ Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</a>
      </div>
  </div>

  <!-- Ø§Ù„ÙƒÙˆÙŠØ² -->
  <div class="container" id="quizSection" style="display: none;">
    <h3>ğŸ“˜ ÙƒÙˆÙŠØ²</h3>
  <style>
    .question {
      margin-bottom: 20px;
    }
    .question img {
      display: block;
      margin: 0 auto 15px;
      width: 100%;
      border: 1px solid #ddd;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .option {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      transition: 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .option:hover {
      background: #ff00008e;
    }
    .option input[type="radio"] {
      transform: scale(1.2);
      accent-color: #007bff; /* ÙŠØ®Ù„ÙŠ Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ Ø£Ø²Ø±Ù‚ */
    }
  </style>

  <form id="quizForm">
    <!-- Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„ -->

      <!-- Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„ -->
    <div class="question">
      <img loading="lazy" src="1.PNG" alt="Ø³Ø¤Ø§Ù„ 1">
      <div class="options">
    <label class="option">
      <input type="radio" name="q1" value="0">
      <span>Ø£</span>
    </label>
    <label class="option">
      <input type="radio" name="q1" value="0">
      <span>Ø¨</span>
    </label>
    <label class="option">
      <input type="radio" name="q1" value="0">
      <span>Ø¬</span>
    </label>
    <label class="option">
      <input type="radio" name="q1" value="1">
      <span>Ø¯</span>
    </label>
  </div>

    </div>

    <!-- Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø«Ø§Ù†ÙŠ -->
      <div class="question">
      <img loading="lazy" src="2.PNG" alt="Ø³Ø¤Ø§Ù„ 1">
      <div class="options">
    <label class="option">
      <input type="radio" name="q2" value="0">
      <span>Ø£</span>
    </label>
    <label class="option">
      <input type="radio" name="q2" value="0">
      <span>Ø¨</span>
    </label>
    <label class="option">
      <input type="radio" name="q2" value="1">
      <span>Ø¬</span>
    </label>
    <label class="option">
      <input type="radio" name="q2" value="0">
      <span>Ø¯</span>
    </label>
  </div>

    </div>





    <div class="question">
      <img loading="lazy" src="3.PNG" alt="Ø³Ø¤Ø§Ù„ 1">
      <div class="options">
    <label class="option">
      <input type="radio" name="q3" value="0">
      <span>Ø£</span>
    </label>
    <label class="option">
      <input type="radio" name="q3" value="1">
      <span>Ø¨</span>
    </label>
    <label class="option">
      <input type="radio" name="q3" value="0">
      <span>Ø¬</span>
    </label>
    <label class="option">
      <input type="radio" name="q3" value="0">
      <span>Ø¯</span>
    </label>
  </div>

    </div>




    <div class="question">
      <img loading="lazy" src="4.PNG" alt="Ø³Ø¤Ø§Ù„ 1">
      <div class="options">
    <label class="option">
      <input type="radio" name="q4" value="0">
      <span>Ø£</span>
    </label>
    <label class="option">
      <input type="radio" name="q4" value="0">
      <span>Ø¨</span>
    </label>
    <label class="option">
      <input type="radio" name="q4" value="1">
      <span>Ø¬</span>
    </label>
    <label class="option">
      <input type="radio" name="q4" value="0">
      <span>Ø¯</span>
    </label>
  </div>

    </div>



      <div class="question">
      <img loading="lazy" src="5.PNG" alt="Ø³Ø¤Ø§Ù„ 1">
      <div class="options">
    <label class="option">
      <input type="radio" name="q5" value="0">
      <span>Ø£</span>
    </label>
    <label class="option">
      <input type="radio" name="q5" value="0">
      <span>Ø¨</span>
    </label>
    <label class="option">
      <input type="radio" name="q5" value="1">
      <span>Ø¬</span>
    </label>
    <label class="option">
      <input type="radio" name="q5" value="0">
      <span>Ø¯</span>
    </label>
  </div>

    </div>



      <div class="question">
      <img loading="lazy" src="6.PNG" alt="Ø³Ø¤Ø§Ù„ 1">
      <div class="options">
    <label class="option">
      <input type="radio" name="q6" value="1">
      <span>Ø£</span>
    </label>
    <label class="option">
      <input type="radio" name="q6" value="0">
      <span>Ø¨</span>
    </label>
    <label class="option">
      <input type="radio" name="q6" value="0">
      <span>Ø¬</span>
    </label>
    <label class="option">
      <input type="radio" name="q6" value="0">
      <span>Ø¯</span>
    </label>
  </div>

    </div>




      <div class="question">
      <img loading="lazy" src="7.PNG" alt="Ø³Ø¤Ø§Ù„ 1">
      <div class="options">
    <label class="option">
      <input type="radio" name="q7" value="0">
      <span>Ø£</span>
    </label>
    <label class="option">
      <input type="radio" name="q7" value="0">
      <span>Ø¨</span>
    </label>
    <label class="option">
      <input type="radio" name="q7" value="1">
      <span>Ø¬</span>
    </label>
    <label class="option">
      <input type="radio" name="q7" value="0">
      <span>Ø¯</span>
    </label>
  </div>

    </div>



      <div class="question">
      <img loading="lazy" src="8.PNG" alt="Ø³Ø¤Ø§Ù„ 1">
      <div class="options">
    <label class="option">
      <input type="radio" name="q8" value="0">
      <span>Ø£</span>
    </label>
    <label class="option">
      <input type="radio" name="q8" value="0">
      <span>Ø¨</span>
    </label>
    <label class="option">
      <input type="radio" name="q8" value="0">
      <span>Ø¬</span>
    </label>
    <label class="option">
      <input type="radio" name="q8" value="1">
      <span>Ø¯</span>
    </label>
  </div>

    </div>




      <div class="question">
      <img loading="lazy" src="9.PNG" alt="Ø³Ø¤Ø§Ù„ 1">
      <div class="options">
    <label class="option">
      <input type="radio" name="q9" value="0">
      <span>Ø£</span>
    </label>
    <label class="option">
      <input type="radio" name="q9" value="1">
      <span>Ø¨</span>
    </label>
    <label class="option">
      <input type="radio" name="q9" value="0">
      <span>Ø¬</span>
    </label>
    <label class="option">
      <input type="radio" name="q9" value="0">
      <span>Ø¯</span>
    </label>
  </div>

    </div>



          <div class="question">
      <img loading="lazy" src="10.PNG" alt="Ø³Ø¤Ø§Ù„ 1">
      <div class="options">
    <label class="option">
      <input type="radio" name="q10" value="0">
      <span>Ø£</span>
    </label>
    <label class="option">
      <input type="radio" name="q10" value="1">
      <span>Ø¨</span>
    </label>
    <label class="option">
      <input type="radio" name="q10" value="0">
      <span>Ø¬</span>
    </label>
    <label class="option">
      <input type="radio" name="q10" value="0">
      <span>Ø¯</span>
    </label>
  </div>

    </div>

    <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
  </form>

    <p id="quizMsg"></p>
  </div>

  <!-- Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
  <div class="container" id="videoSection" style="display: none; width: 90%;">
      <button class="menu-btn" onclick="toggleSidebar()">â˜°</button>
      <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

      <div class="header">
        <h2>Ø§Ù„Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ù‡ Ø§Ù„Ø®Ø§Ù…Ø³Ù‡ - Ø§Ù„Ù‚Ø¯Ø±Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨ÙŠØ© </h2>
        <p>Ù…Ø¯Ø© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©: Ø£Ø³Ø¨ÙˆØ¹ ÙÙ‚Ø·</p>
      </div>

      <iframe id="mainVideo" 
      src="https://www.youtube.com/embed/rAMdNrlWb-E" 
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
      allowfullscreen>
      </iframe>
  <!-- Ø²Ø±Ø§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙˆØ§Ù„ØªØ§Ù„ÙŠ -->
  <div style="margin: 15px 0; text-align: center;">
    <button onclick="prevVideo()"> Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
    <button onclick="nextVideo()">Ø§Ù„ØªØ§Ù„ÙŠ </button>
  </div>





  <script>
  function nextVideo() {
    let videos = document.querySelectorAll(".video-item");
    let current = document.querySelector(".video-item.active");
    let currentIndex = Array.from(videos).indexOf(current);
    let nextIndex = currentIndex + 1;

    if (nextIndex < videos.length) {
      let nextVideo = videos[nextIndex];
      let videoId = nextVideo.getAttribute("onclick").match(/'(.*?)'/)[1];
      changeVideo(videoId, nextVideo);

      // Ø§ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© ÙˆØ¨Ø¹Ø¯ÙŠÙ† Ø§Ù‚ÙÙ„Ù‡Ø§
      toggleSidebar(true);
      setTimeout(() => toggleSidebar(false), 1000);
    } else {
      alert("ğŸ“Œ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆ Ø¨Ø¹Ø¯ Ù‡Ø°Ø§");
    }
  }

  function prevVideo() {
    let videos = document.querySelectorAll(".video-item");
    let current = document.querySelector(".video-item.active");
    let currentIndex = Array.from(videos).indexOf(current);
    let prevIndex = currentIndex - 1;

    if (prevIndex >= 0) {
      let prevVideo = videos[prevIndex];
      let videoId = prevVideo.getAttribute("onclick").match(/'(.*?)'/)[1];
      changeVideo(videoId, prevVideo);

      // Ø§ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© ÙˆØ¨Ø¹Ø¯ÙŠÙ† Ø§Ù‚ÙÙ„Ù‡Ø§
      toggleSidebar(true);
      setTimeout(() => toggleSidebar(false), 1000);
    } else {
      alert("ğŸ“Œ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆ Ù‚Ø¨Ù„ Ù‡Ø°Ø§");
    }
  }

  function changeVideo(videoId, element) {
    document.getElementById("mainVideo").src = "https://www.youtube.com/embed/" + videoId;

    // Ø¥Ø²Ø§Ù„Ø© active Ù…Ù† ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ±
    let items = document.querySelectorAll(".video-item");
    items.forEach(item => item.classList.remove("active"));

    // Ø¥Ø¶Ø§ÙØ© active Ù„Ù„ÙŠ Ø§ØªØ¶ØºØ· Ø¹Ù„ÙŠÙ‡ Ø£Ùˆ Ø§Ù„Ù„ÙŠ Ø¬Ø§Ù„Ù‡ Ù…Ù† next/prev
    element.classList.add("active");
  }

  // ØªØ¹Ø¯ÙŠÙ„ toggleSidebar Ø¹Ø´Ø§Ù† ØªØ³ØªÙ‚Ø¨Ù„ Ø­Ø§Ù„Ø© on/off
  function toggleSidebar(force) {
    let sidebar = document.getElementById("sidebar");
    let overlay = document.getElementById("overlay");

    if (force === true) {
      sidebar.classList.add("open");
      overlay.style.display = "block";
    } else if (force === false) {
      sidebar.classList.remove("open");
      overlay.style.display = "none";
    } else {
      // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ: toggle
      sidebar.classList.toggle("open");
      overlay.style.display = sidebar.classList.contains("open") ? "block" : "none";
    }
  }

  toggleSidebar(true);                 // Ø§ÙØªØ­
  setTimeout(() => toggleSidebar(false), 500);  // Ø§Ù‚ÙÙ„ Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ©

  </script>
  </div>

  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
  <div class="sidebar" id="sidebar">
    <h3>ğŸ“º Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</h3>
    <div class="video-item active" onclick="changeVideo('rAMdNrlWb-E', this)">
      <img loading="lazy" src="https://img.youtube.com/vi/rAMdNrlWb-E/0.jpg" alt="Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰">
      <p>Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</p>
    </div>
    <div class="video-item" onclick="changeVideo('ky6wKZDoeGU', this)">
      <img loading="lazy" src="https://img.youtube.com/vi/ky6wKZDoeGU/0.jpg" alt="Ø§Ù„ÙˆØ§Ø¬Ø¨">
      <p>Ø§Ù„ÙˆØ§Ø¬Ø¨</p>
    </div>
  </div>

  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("overlay");
      sidebar.classList.toggle("active");
      overlay.classList.toggle("active");
    }

    function changeVideo(videoId, element) {
      document.getElementById("mainVideo").src = "https://www.youtube.com/embed/" + videoId;
      const allItems = document.querySelectorAll('.video-item');
      allItems.forEach(item => item.classList.remove('active'));
      element.classList.add('active');
    }
  </script>

  <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
      import { 
        getFirestore, collection, query, where, getDocs, updateDoc, doc, addDoc
      } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyCYTyLhaju2pz9Qm8kcOmouj021ZHsD7Ak",
        authDomain: "corss-cee70.firebaseapp.com",
        projectId: "corss-cee70",
        storageBucket: "corss-cee70.appspot.com",
        messagingSenderId: "252749122878",
        appId: "1:252749122878:web:decad07aec6ed917a4b06f",
        measurementId: "G-7G2SDLRBZ8"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      const courseName = document.getElementById("fixedCourseName").textContent.trim();
      const activationSection = document.getElementById("activationSection");
      const quizSection = document.getElementById("quizSection");
      const videoSection = document.getElementById("videoSection");
      const msg = document.getElementById("msg");

      const savedCourses = JSON.parse(localStorage.getItem("activatedCourses") || "{}");
      const quizStatus = JSON.parse(localStorage.getItem("quizStatus") || "{}");

      // Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
      if (savedCourses[courseName]) {
        const now = Date.now();
        if (now < savedCourses[courseName].expiry) {
          activationSection.style.display = "none";
          if (quizStatus[courseName]) {
            // Ù„Ùˆ Ø§Ù„ÙƒÙˆÙŠØ² Ø§ØªØ­Ù„ Ù‚Ø¨Ù„ ÙƒØ¯Ø§
            videoSection.style.display = "block";
          } else {
            quizSection.style.display = "block";
          }
        } else {
          delete savedCourses[courseName];
          localStorage.setItem("activatedCourses", JSON.stringify(savedCourses));
        }
      }

      async function activateCourse() {
        const codeInput = document.getElementById("courseCode").value.trim();
        msg.style.color = "red";

        if (!codeInput) {
          msg.textContent = "âŒ Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„.";
          return;
        }

        const q = query(
          collection(db, "courseCodes"),
          where("courseName", "==", courseName),
          where("code", "==", codeInput)
        );

        const snapshot = await getDocs(q);

        if (snapshot.empty) {
          msg.textContent = "âŒ Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ù„Ø§ ÙŠØªØ¨Ø¹ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ±Ø³.";
          return;
        }

        const docSnap = snapshot.docs[0];
        const data = docSnap.data();

        if (data.used) {
          msg.textContent = "âŒ Ø§Ù„ÙƒÙˆØ¯ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ù† Ù‚Ø¨Ù„.";
        } else {
          let studentData = {};
          try {
            studentData = JSON.parse(localStorage.getItem("studentData") || "{}");
          } catch (e) {
            studentData = {};
          }

          const studentName = studentData.name || "";
          const studentClass = studentData.grade || "";
          const studentId = studentData.studentId || "";

          if (!studentName || !studentClass || !studentId) {
            msg.textContent = "âŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© ÙÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø².";
            return;
          }

          await updateDoc(doc(db, "courseCodes", docSnap.id), { used: true });

          await fetch("https://firestore.googleapis.com/v1/projects/corss-cee70/databases/(default)/documents/Students-corss", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              fields: {
                name: { stringValue: studentName },
                class: { stringValue: studentClass },
                studentId: { stringValue: studentId },
                courseCode: { stringValue: codeInput },
                courseName: { stringValue: courseName }
              }
            })
          });

          const expiryMinutes = 7 * 24 * 60;
          const expiryTime = Date.now() + (expiryMinutes * 60 * 1000);

          savedCourses[courseName] = {
            link: window.location.pathname,
            expiry: expiryTime
          };

          localStorage.setItem("activatedCourses", JSON.stringify(savedCourses));

          msg.style.color = "green";
          msg.textContent = "âœ… ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!";
          activationSection.style.display = "none";

          // Ù„Ùˆ Ø§Ù„ÙƒÙˆÙŠØ² Ù…ØªØ­Ù„Ø´ Ù‚Ø¨Ù„ ÙƒØ¯Ø§ â†’ Ø§ÙØªØ­ Ø§Ù„ÙƒÙˆÙŠØ²
          if (quizStatus[courseName]) {
            videoSection.style.display = "block";
          } else {
            quizSection.style.display = "block";
          }
        }
      }

      window.activateCourse = activateCourse;
  // ÙƒÙˆØ¯ Ø§Ù„ÙƒÙˆÙŠØ²
  // Ø§Ù„ØµÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙƒÙ„ Ø³Ø¤Ø§Ù„
  const questionImages = {
    q1: "1.PNG",
    q2: "2.PNG",
    q3: "3.PNG",
    q4: "4.PNG",
    q5: "5.PNG",
    q6: "6.PNG",
    q7: "7.PNG",
    q8: "8.PNG",
    q9: "9.PNG",
    q10: "10.PNG"
  };

  // Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© (Ø§Ù„Ø­Ø±ÙˆÙ)
  const correctAnswers = {
    q1: "Ø¯",
    q2: "Ø¬",
    q3: "Ø¨",
    q4: "Ø¬",
    q5: "Ø¬",
    q6: "Ø£",
    q7: "Ø¬",
    q8: "Ø¯",
    q9: "Ø¨",
    q10: "Ø¨"
  };

  const quizForm = document.getElementById("quizForm");
  const quizMsg = document.getElementById("quizMsg");

  quizForm.addEventListener("submit", async (e) => {
    e.preventDefault();

    let score = 0;
    const formData = new FormData(quizForm);
    let answers = {}; // Ù‡Ù†Ø§ Ù‡Ù†Ø­ÙØ¸ Ø§Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ø§Ù„ØªÙØµÙŠÙ„

    for (const [key, value] of formData.entries()) {
      let selectedInput = quizForm.querySelector(`input[name="${key}"][value="${value}"]`);
      let chosenText = selectedInput ? selectedInput.nextElementSibling.textContent.trim() : "";

      let correctText = correctAnswers[key];
      let isCorrect = chosenText === correctText;
      if (isCorrect) score++;

      // Ù†Ø®Ø²Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ø¹ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª
// Ù‡Ø§Øª Ù…Ø³Ø§Ø± Ø§Ù„ØµÙØ­Ø© (Ø§Ù„ÙÙˆÙ„Ø¯Ø±) Ø§Ù„Ø­Ø§Ù„ÙŠ
let pagePath = window.location.href.substring(0, window.location.href.lastIndexOf("/") + 1);

// Ù‡Ø§Øª Ø§Ø³Ù… Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ø³Ø¤Ø§Ù„
let imgName = questionImages[key];  // Ù…Ø«Ù„Ø§ "p-1.PNG"

// Ø®Ø²Ù‘Ù† Ø§Ù„Ù…Ø³Ø§Ø± + Ø§Ø³Ù… Ø§Ù„ØµÙˆØ±Ø©
answers["Ø§Ù„Ø³Ø¤Ø§Ù„ " + key.replace("q","")] = {
  img: pagePath + imgName,   // Ø§Ù„Ù†ØªÙŠØ¬Ø©: file:///C:/...../p-1.PNG
  chosen: `(${chosenText})`,
  correctAnswer: `(${correctText})`,
  isCorrect: isCorrect
};

    }

    // âœ… ØªØ®Ø²ÙŠÙ† ÙÙŠ localStorage (Ø¨Ø§Ù„ØµÙˆØ±)
    quizStatus[courseName] = {
      solved: true,
      score: score,
      total: Object.keys(answers).length,
      answers: answers
    };
    localStorage.setItem("quizStatus", JSON.stringify(quizStatus));

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
    let studentData = {};
    try {
      studentData = JSON.parse(localStorage.getItem("studentData") || "{}");
    } catch (e) {
      studentData = {};
    }

    if (!studentData.name || !studentData.studentId || !studentData.grade) {
      quizMsg.style.color = "red";
      quizMsg.textContent = "âŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø².";
      return;
    }

    // ğŸ”¥ Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¨Ø¯ÙˆÙ† ØµÙˆØ± Ø¹Ù„Ø´Ø§Ù† Firebase
    let firebaseAnswers = {};
    Object.keys(answers).forEach(q => {
      firebaseAnswers[q] = {
        chosen: answers[q].chosen,
        correctAnswer: answers[q].correctAnswer,
        isCorrect: answers[q].isCorrect
      };
    });

    // âœ… Ø­ÙØ¸ ÙÙŠ Firestore (Ù…Ù† ØºÙŠØ± Ø§Ù„ØµÙˆØ±)
    await addDoc(collection(db, "quiz"), {
      name: studentData.name,
      studentId: studentData.studentId,
      grade: studentData.grade,
      governorate: studentData.governorate || "",
      school: studentData.school || "",
      parentPhone: studentData.parentPhone || "",
      studentPhone: studentData.studentPhone || "",
      score: score,
      total: Object.keys(answers).length,
      answers: firebaseAnswers, // Ù…Ù† ØºÙŠØ± ØµÙˆØ±
      courseName: courseName,
      timestamp: new Date()
    });

    quizMsg.style.color = "green";
    quizMsg.textContent = "âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ù†Ø¬Ø§Ø­.";


      // Ø¹Ø±Ø¶ Ù…Ù„Ø®Øµ Ù„Ù„Ø·Ø§Ù„Ø¨
      let resultHTML = `<h4 style="color:#4caf50"; font-size:"20px">ğŸ“Š Ù†ØªÙŠØ¬ØªÙƒ: ${score}/10</h4>`;
  Object.keys(answers).forEach(q => {
    let a = answers[q];
   resultHTML += `
  <div style="margin-bottom:15px; background:#1e1e1e; padding:12px; border-radius:10px; border:1px solid #444;">
    <p style="margin:0; font-size:16px; color:#ddd;">
      <b>${q}</b><br>
      ${a.isCorrect 
        ? "<span style='color:#4caf50'>âœ… ØµØ­</span>" 
        : "<span style='color:#f44336'>âŒ ØºÙ„Ø· - Ø§Ù„ØµØ­ Ù‡Ùˆ: " + a.correctAnswer + "</span>"}
    </p>
  </div>
`;
  });

  quizMsg.innerHTML = resultHTML;
    

  quizMsg.style.color = "black";
  quizMsg.innerHTML = resultHTML;

  // Ù†Ø¶ÙŠÙ Ø²Ø±Ø§Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ø­Ø§Ø¶Ø±Ø©
  let enterBtn = document.createElement("button");
  enterBtn.textContent = "ğŸš€ Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ø­Ø§Ø¶Ø±Ø©";
  enterBtn.style.marginTop = "15px";
  enterBtn.style.padding = "10px 20px";
  enterBtn.style.background = "#007bff";
  enterBtn.style.width = "50%";
  enterBtn.style.color = "#fff";
  enterBtn.style.border = "none";
  enterBtn.style.borderRadius = "8px";
  enterBtn.style.cursor = "pointer";

  // Ù„Ù…Ø§ ÙŠØ¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±Ø§Ø± ÙŠØ¯Ø®Ù„ Ù„Ù„Ù…Ø­Ø§Ø¶Ø±Ø©
  enterBtn.addEventListener("click", () => {
    quizSection.style.display = "none";
    videoSection.style.display = "block";
  });

  // Ù†Ø¶ÙŠÙ Ø§Ù„Ø²Ø±Ø§Ø± ØªØ­Øª Ø§Ù„Ù†ØªÙŠØ¬Ø©
  quizMsg.appendChild(enterBtn);

    });
  </script>


  </body>
  </html>
