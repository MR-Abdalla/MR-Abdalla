<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³ - Ù…Ø³ØªØ± Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø³ÙŠØ¯</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-black: #0a0a0a;
      --secondary-black: #1a1a1a;
      --accent-orange: #FF6B35;
      --accent-light-orange: #FF9E6D;
      --accent-dark-orange: #E55A2B;
      --gold: #FFA500;
      --light-gray: #f5f5f5;
      --text-white: #ffffff;
      --text-light: #e0e0e0;
      --border-dark: #333333;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--primary-black);
      color: var(--text-light);
      line-height: 1.6;
      padding: 0;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø³ØªØ± Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø³ÙŠØ¯ */
    .teacher-badge {
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 1000;
      background: linear-gradient(135deg, var(--accent-orange), #D35400);
      color: white;
      padding: 8px 15px;
      border-radius: 50px;
      font-weight: bold;
      font-size: 0.9rem;
      box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
      border: 2px solid var(--gold);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .teacher-badge i {
      font-size: 1.1rem;
    }

    /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
    .page-header {
      background: linear-gradient(135deg, var(--primary-black), #2A1A0A);
      color: white;
      padding: 20px 15px;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
      margin-bottom: 20px;
      border-bottom: 3px solid var(--accent-orange);
      position: relative;
      overflow: hidden;
    }

    .page-header::before {
      content: "";
      position: absolute;
      top: 0;
      right: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="%23FF6B35" opacity="0.1"/></svg>');
      background-size: cover;
      pointer-events: none;
    }

    .page-header h1 {
      font-size: 1.6rem;
      margin-bottom: 8px;
      color: var(--text-white);
      position: relative;
    }

    .page-header h1 span {
      color: var(--gold);
    }

    .page-header p {
      opacity: 0.9;
      font-size: 0.9rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .teacher-title {
      color: var(--accent-light-orange);
      font-weight: bold;
      margin-top: 5px;
      font-size: 1.1rem;
    }

    .container {
      max-width: 100%;
      margin: 0 auto;
      padding: 0 10px;
    }

    @media (min-width: 768px) {
      .container {
        max-width: 95%;
        padding: 0 15px;
      }
      
      .page-header {
        padding: 25px 20px;
      }
      
      .page-header h1 {
        font-size: 1.9rem;
      }
    }

    @media (min-width: 1200px) {
      .container {
        max-width: 1200px;
      }
    }

    /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ Ù„Ù„Ù‡Ø§ØªÙ Ø£ÙˆÙ„Ø§Ù‹ */
    .course-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 30px;
    }

    @media (min-width: 992px) {
      .course-container {
        flex-direction: row;
        gap: 25px;
      }
    }

    .main-content {
      flex: 1;
      background-color: var(--secondary-black);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
      border: 1px solid var(--border-dark);
      width: 100%;
    }

    .sidebar {
      width: 100%;
      background-color: var(--secondary-black);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
      border: 1px solid var(--border-dark);
    }

    @media (min-width: 992px) {
      .sidebar {
        width: 350px;
        flex-shrink: 0;
      }
    }

    /* Ø±Ø£Ø³ Ø§Ù„ÙƒÙˆØ±Ø³ */
    .course-header {
      display: flex;
      flex-direction: column;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--accent-orange);
    }

    @media (min-width: 768px) {
      .course-header {
        flex-direction: row;
        align-items: flex-start;
        gap: 20px;
      }
    }

    .course-image {
      width: 100%;
      max-width: 100%;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.6);
      border: 2px solid var(--accent-orange);
    }

    @media (min-width: 768px) {
      .course-image {
        width: 40%;
        max-width: 350px;
        margin-bottom: 0;
      }
    }

    .course-image img {
      width: 100%;
      height: auto;
      display: block;
      transition: transform 0.5s;
    }

    .course-image:hover img {
      transform: scale(1.03);
    }

    .course-info {
      flex: 1;
    }

    .course-title {
      color: var(--text-white);
      font-size: 1.5rem;
      margin-bottom: 10px;
      line-height: 1.3;
    }

    @media (min-width: 768px) {
      .course-title {
        font-size: 1.7rem;
      }
    }

    .course-description {
      margin-bottom: 15px;
      color: var(--text-light);
      font-size: 0.95rem;
    }

    .course-price {
  background: #ff7a2f;           /* Ù„ÙˆÙ† Ø«Ø§Ø¨Øª Ù†Ø§Ø¹Ù… */
  color: #fff;
  padding: 6px 12px;             /* ØµØºÙŠØ± */
  border-radius: 8px;            /* Ù†Ø§Ø¹Ù… */
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;               /* ØµØºÙŠØ± */
  font-weight: 600;
  border: 1px solid rgba(255,255,255,0.2);
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  width: fit-content;            /* Ø¹Ù„Ø´Ø§Ù† ÙŠÙƒÙˆÙ† Ù…ØªØ¬Ø§ÙˆØ¨ */
  max-width: 100%;
  transition: 0.2s ease;
}

/* Hover Ø¨Ø³ÙŠØ· */
.course-price:hover {
  transform: scale(1.03);
}


    /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…ØªØ¬Ø§ÙˆØ¨Ø© */
    .video-container {
      position: relative;
      width: 100%;
      padding-bottom: 56.25%; /* Ù†Ø³Ø¨Ø© 16:9 */
      height: 0;
      margin-bottom: 20px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
      background-color: #000;
      border: 2px solid var(--accent-orange);
    }

    .video-placeholder {
      position: absolute;
      top: 0;
      right: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #1A0A0A, #2A1A0A);
      color: white;
      text-align: center;
    }

    .video-placeholder i {
      font-size: 3rem;
      color: var(--accent-orange);
      margin-bottom: 15px;
    }

    .video-placeholder p {
      font-size: 1rem;
      opacity: 0.9;
      max-width: 300px;
    }

    /* ØªØ®ØµÙŠØµ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¥Ø·Ø§Ø± */
    #mainVideoFrame, #homeworkVideoFrame {
      position: absolute;
      top: 0;
      right: 0;
      width: 100%;
      height: 100%;
      border-radius: 10px;
      border: none;
    }

    /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª */
    .lectures-list {
      display: grid;
      grid-template-columns: 1fr;
      gap: 15px;
      margin-top: 20px;
    }

    @media (min-width: 768px) {
      .lectures-list {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .lecture-card {
      background-color: #1f1f1f;
      border-radius: 12px;
      padding: 18px;
      border-right: 4px solid var(--accent-orange);
      border: 1px solid var(--border-dark);
      transition: all 0.3s;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .lecture-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(255, 107, 53, 0.2);
      border-color: var(--accent-light-orange);
    }

    .lecture-card.locked {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .lecture-card.completed {
      border-color: #4CAF50;
    }

    .lecture-number {
      background-color: var(--accent-orange);
      color: white;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-bottom: 12px;
    }

    .lecture-card-title {
      color: var(--text-white);
      font-size: 1.1rem;
      margin-bottom: 10px;
      flex-grow: 1;
    }

    .lecture-meta {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
      font-size: 0.85rem;
      color: var(--text-light);
    }

    .lecture-status {
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
    }

    .status-locked {
      background-color: #555;
      color: #bbb;
    }

    .status-unlocked {
      background-color: rgba(76, 175, 80, 0.2);
      color: #a5d6a7;
    }

    .status-quiz {
      background-color: rgba(255, 107, 53, 0.2);
      color: var(--accent-light-orange);
    }

    /* ØµÙØ­Ø© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© */
    .lecture-page {
      display: none;
      animation: fadeIn 0.5s;
    }

    .lecture-page.active {
      display: block;
    }

    .lecture-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--accent-orange);
    }

    .back-to-list {
      display: inline-flex;
      align-items: center;
      background-color: #2a2a2a;
      color: var(--text-light);
      padding: 8px 15px;
      border-radius: 8px;
      text-decoration: none;
      transition: all 0.3s;
      border: 1px solid var(--border-dark);
      font-size: 0.8rem;
    }

    .back-to-list:hover {
      background-color: var(--accent-orange);
      color: white;
    }

    .back-to-list i {
      margin: 5px;
    }

    .lecture-resources {
      display: flex;
      flex-wrap: wrap;
      gap: 1px;
      margin: 20px;
    }

    .resource-link {
      display: inline-flex;
      align-items: center;
      background-color: #2a2a2a;
      color: var(--text-light);
      padding: 10px 15px;
      border-radius: 8px;
      text-decoration: none;
      transition: all 0.3s;
      border: 1px solid var(--border-dark);
      font-size: 10px;
      cursor: pointer;
    }

    .resource-link:hover {
      background-color: var(--accent-orange);
      color: white;
      transform: translateY(-2px);
    }

    .resource-link.active {
      background-color: var(--accent-orange);
      color: white;
      border-color: var(--accent-light-orange);
    }

    .resource-link i {
      margin-left: 8px;
    }

    .resource-link.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .resource-link.disabled:hover {
      background-color: #2a2a2a;
      color: var(--text-light);
      transform: none;
    }

    /* ØµÙØ­Ø© Ø§Ù„ÙƒÙˆÙŠØ² */
    .quiz-page {
      display: none;
      animation: fadeIn 0.5s;
    }

    .quiz-page.active {
      display: block;
    }

    .quiz-header {
      text-align: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--accent-orange);
    }

    .quiz-progress {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      background-color: #2a2a2a;
      padding: 15px;
      border-radius: 10px;
    }

    .quiz-question {
      background-color: #1f1f1f;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid var(--border-dark);
    }

    .quiz-question-image {
      max-width: 100%;
      border-radius: 8px;
      margin-bottom: 15px;
      display: block;
    }

    .quiz-question-text {
      font-size: 1.1rem;
      margin-bottom: 15px;
      color: var(--text-white);
    }

    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .quiz-option {
      padding: 14px 18px;
      border: 2px solid var(--border-dark);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      background-color: #2a2a2a;
      font-size: 0.95rem;
    }

    .quiz-option:hover {
      background-color: #3a3a3a;
      border-color: #555;
    }

    .quiz-option.selected {
      border-color: var(--accent-orange);
      background-color: rgba(255, 107, 53, 0.1);
    }

    .quiz-option.correct {
      border-color: #4CAF50;
      background-color: rgba(76, 175, 80, 0.2);
      color: #a5d6a7;
    }

    .quiz-option.wrong {
      border-color: var(--accent-orange);
      background-color: rgba(255, 107, 53, 0.2);
      color: #ffabab;
    }

    .quiz-navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 25px;
    }

    /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--accent-orange), #D35400);
      color: white;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1rem;
      border: none;
      transition: all 0.3s;
      text-decoration: none;
      box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
      gap: 10px;
      border: 1px solid var(--gold);
      padding: 10px;
    }

    .btn:hover {
      background: linear-gradient(135deg, var(--accent-light-orange), #E55A2B);
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(255, 107, 53, 0.5);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .btn i {
      font-size: 1.1rem;
    }

    .btn-outline {
      background: transparent;
      border: 2px solid var(--accent-orange);
      color: var(--accent-orange);
    }

    .btn-outline:hover {
      background-color: var(--accent-orange);
      color: white;
    }

    /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
    .message {
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      text-align: center;
      font-weight: bold;
      font-size: 0.95rem;
    }

    .message.success {
      background-color: rgba(76, 175, 80, 0.2);
      border: 1px solid #4CAF50;
      color: #a5d6a7;
    }

    .message.error {
      background-color: rgba(255, 107, 53, 0.2);
      border: 1px solid var(--accent-orange);
      color: #ffabab;
    }

    .message.info {
      background-color: rgba(33, 150, 243, 0.2);
      border: 1px solid #2196F3;
      color: #90caf9;
    }

    /* Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
    .loading {
      text-align: center;
      padding: 40px 20px;
      font-size: 1.1rem;
      color: var(--text-light);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 300px;
    }

    .loading i {
      font-size: 16px;
      animation: spin 1.5s linear infinite;
    }

    /* ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© */
    footer {
      background-color: var(--secondary-black);
      color: var(--text-light);
      text-align: center;
      padding: 20px 15px;
      margin-top: 30px;
      border-top: 1px solid var(--border-dark);
      font-size: 0.9rem;
    }

    .footer-logo {
      color: var(--accent-orange);
      font-weight: bold;
      font-size: 1.1rem;
      margin-bottom: 10px;
    }

    .footer-logo span {
      color: var(--gold);
    }

    /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
    .mobile-menu-btn {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 100;
      background-color: var(--accent-orange);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: none;
      font-size: 1.5rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }

    @media (max-width: 991px) {
      .mobile-menu-btn {
        display: flex;
      }
      
     

      .loading{
        padding: 0;
      }
    }

    /* ØªØ®ØµÙŠØµ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #1a1a1a;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--accent-orange);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--accent-light-orange);
    }

    /* Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ¹ØªÙŠÙ… Ù„Ù„Ù‡Ø§ØªÙ */
    .overlay {
      display: none;
      position: fixed;
      top: 0;
      right: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 999;
    }

    .overlay.active {
      display: block;
    }

    /* ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª */
    .progress-container {
      margin: 20px 0;
    }

    .progress-bar {
      height: 10px;
      background-color: #2a2a2a;
      border-radius: 5px;
      overflow: hidden;
      margin-bottom: 10px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-orange), var(--accent-light-orange));
      border-radius: 5px;
      width: 0%;
      transition: width 0.5s ease;
    }

    .progress-text {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: var(--text-light);
    }

    /* Ø¹Ù„Ø§Ù…Ø§Øª ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
    .video-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      border-bottom: 2px solid var(--border-dark);
      padding-bottom: 10px;
    }

    .video-tab {
      padding: 10px 20px;
      background-color: #2a2a2a;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: bold;
      color: var(--text-light);
      border: 1px solid transparent;
    }

    .video-tab:hover {
      background-color: #3a3a3a;
    }

    .video-tab.active {
      background-color: var(--accent-orange);
      color: white;
      border-color: var(--accent-light-orange);
    }

    @media (max-width: 450px){
      .container{
        padding: 0px;
      }

          .resource-link {
      display: inline-flex;
      align-items: center;
      background-color: #2a2a2a;
      color: var(--text-light);
      padding: 10px 15px;
      border-radius: 8px;
      text-decoration: none;
      transition: all 0.3s;
      border: 1px solid var(--border-dark);
      font-size: 10px;
      cursor: pointer;
    }

      .lecture-title{
        font-size: 14px;
      }

      .video-tab{
        font-size: 10px;
      }
      .lecture-header{
        padding: 20px;
      }
      .main-content{
        padding: 0;
        border-radius: 15px 15px 0 0;
      }
      .video-tabs{
        padding: 0 20px 10px 20px;
      }
      .video-container{
        border: 0;
        border-radius: 0;
      }
      .course-container{
        gap: 0;
        border-radius: 0 0 15px 15px;
      }
      .course-header{
        padding: 20px;
      }
      .sidebar{
        margin:  20px 0;
        border-radius: 15px;
      }
      .la{
        padding: 0 20px;
      }
      .lectures-list{
        padding: 10px;
      }
      .course-title{
        font-size: 14px;
      }
      .course-description{
        font-size: 12px;
      }
      .progress-text{
        padding: 10px 0;
      }
      .quiz-page{
        padding: 10px;
      }
    }

    
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ¹ØªÙŠÙ… Ù„Ù„Ø¬ÙˆØ§Ù„ -->
  <div class="overlay" id="overlay"></div>

  <div class="page-header">
    <p class="teacher-title">Ù…Ù†ØµÙ‡ Ù…Ø³ØªØ± Ø¹Ø¨Ø¯Ù„Ù„Ù‡ Ø§Ù„Ø³ÙŠØ¯</p>
  </div>

  <div class="container">
    <div id="courseBox" class="loading">
      <i class="fas fa-spinner"></i>
      <p>Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒÙˆØ±Ø³...</p>
    </div>
    
    <div id="contentBox" style="display: none;">
      <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ -->
    </div>
    
    <div id="lectureBox" style="display: none;">
      <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø­Ø§Ø¶Ø±Ø© -->
    </div>
  </div>

  <footer>
    <div class="footer-logo">Ù…Ø³ØªØ± Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø³ÙŠØ¯</div>
    <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025</p>
  </footer>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
    import { 
      getFirestore, doc, getDoc, collection, query, where, getDocs, updateDoc, setDoc 
    } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCC5aNDvRjMZFle2tFp3vY6kb74kjVp7Dg",
      authDomain: "subscriptions-f84ee.firebaseapp.com",
      projectId: "subscriptions-f84ee",
      storageBucket: "subscriptions-f84ee.firebasestorage.app",
      messagingSenderId: "425125909485",
      appId: "1:425125909485:web:1dcdf4989d35e5e53c8de4",
      measurementId: "G-B6X1XTLM6Q"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const urlParams = new URLSearchParams(window.location.search);
    const courseId = urlParams.get("id");

    let courseData = null;
    let currentLectureIndex = 0;
    let currentQuizIndex = 0;
    let quizAnswers = [];
    let studentProgress = {};
    let currentVideoType = 'lecture'; // 'lecture' Ø£Ùˆ 'homework'

    // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„Ø¬ÙˆØ§Ù„
    function setupMobileMenu() {
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const overlay = document.getElementById('overlay');
      
      if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', function() {
          const sidebar = document.querySelector('.sidebar');
          if (sidebar) {
            sidebar.classList.add('active');
            overlay.classList.add('active');
          }
        });
      }

      if (overlay) {
        overlay.addEventListener('click', function() {
          const sidebar = document.querySelector('.sidebar');
          if (sidebar) {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
          }
        });
      }

      // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
      document.addEventListener('click', function(event) {
        const sidebar = document.querySelector('.sidebar');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        if (sidebar && sidebar.classList.contains('active') && 
            !sidebar.contains(event.target) && 
            event.target !== mobileMenuBtn) {
          sidebar.classList.remove('active');
          overlay.classList.remove('active');
        }
      });
    }

    async function loadCourse() {
      const courseRef = doc(db, "courses", courseId);
      const snap = await getDoc(courseRef);

      if (!snap.exists()) {
        document.getElementById("courseBox").innerHTML = `
          <div class="message error">
            <i class="fas fa-exclamation-circle"></i>
            <h3>Ø§Ù„ÙƒÙˆØ±Ø³ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</h3>
            <p>Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</p>
            <button class="btn" onclick="window.history.back()" style="margin-top: 15px; width: auto; padding: 10px 20px;">
              <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø©
            </button>
          </div>
        `;
        return;
      }

      courseData = snap.data();
      
      // ØªØ­Ù…ÙŠÙ„ ØªÙ‚Ø¯Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† localStorage
      const progressKey = `course_${courseId}_progress`;
      const savedProgress = localStorage.getItem(progressKey);
      if (savedProgress) {
        studentProgress = JSON.parse(savedProgress);
      } else {
        // ØªÙ‡ÙŠØ¦Ø© ØªÙ‚Ø¯Ù… Ø¬Ø¯ÙŠØ¯
        studentProgress = {
          completedLectures: [],
          quizResults: {}
        };
        localStorage.setItem(progressKey, JSON.stringify(studentProgress));
      }

      // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† Ø§Ù„Ù„ÙˆÙƒÙ„
      const studentData = JSON.parse(localStorage.getItem("studentData"));

      // Ø¥Ø°Ø§ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© â†’ Ø§Ø¸Ù‡Ø± Ø®Ø§Ù†Ø© Ø§Ù„ÙƒÙˆØ¯
      if (!studentData) {
        renderCodeInput();
        return;
      }

      // ØªØ­Ù‚Ù‚ Ù‡Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨ ÙØ¹Ù‘Ù„ Ø§Ù„ÙƒÙˆØ±Ø³ Ù…Ù† Ù‚Ø¨Ù„
      const q = query(
        collection(db, "codes"),
        where("courseId", "==", courseId),
        where("isUsed", "==", true)
      );

      const snapCodes = await getDocs(q);

      const codeUsedByStudent = snapCodes.docs.find(doc => {
        const d = doc.data();
        return d.usedBy && d.usedBy.studentId === studentData.studentId;
      });

      if (codeUsedByStudent) {
        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø¨Ø§Ø´Ø±Ø©
        showCourseContent();
      } else {
        // Ù„Ù… ÙŠÙØ¹Ù„ â†’ Ø§Ø¸Ù‡Ø± Ø®Ø§Ù†Ø© Ø§Ù„ÙƒÙˆØ¯
        renderCodeInput();
      }
    }

    function renderCodeInput() {
      document.getElementById("courseBox").innerHTML = `
        <div class="course-container">
          <div class="main-content">
            <div class="course-header">
              <div class="course-image">
                <img src="${courseData.image || 'https://via.placeholder.com/400x250/1a0a0a/FF6B35?text=Ù…Ø³ØªØ±+Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡+Ø§Ù„Ø³ÙŠØ¯'}" alt="${courseData.title}">
              </div>
              <div class="course-info">
                <h1 class="course-title">${courseData.title}</h1>
                <p class="course-description">${courseData.description || 'ÙƒÙˆØ±Ø³ ØªØ¹Ù„ÙŠÙ…ÙŠ Ù…ØªÙƒØ§Ù…Ù„ ÙŠØ´Ø±Ø­ Ø§Ù„Ù…Ù†Ù‡Ø¬ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ù…Ø¨Ø³Ø· ÙˆØ³Ù‡Ù„'}</p>
                <div class="course-price">
                  <i class="fas fa-tag"></i> Ø§Ù„Ø³Ø¹Ø±: ${courseData.price || '150'} Ø¬Ù†ÙŠÙ‡
                </div>
              </div>
            </div>
            
            <div class="section-title" style="color: var(--accent-light-orange); font-size: 1.3rem; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid var(--accent-orange);">
              <i class="fas fa-info-circle"></i> Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„ÙƒÙˆØ±Ø³
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));  padding: 15px; gap: 15px; margin-bottom: 20px;">
              <div style="background-color: #2a2a2a; padding: 15px; border-radius: 10px; border-right: 3px solid var(--accent-orange);">
                <i class="fas fa-video" style="color: var(--accent-orange); margin-bottom: 8px; font-size: 1.2rem;"></i>
                <div style="font-weight: bold;">ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø´Ø±Ø­ Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©</div>
              </div>
              <div style="background-color: #2a2a2a; padding: 15px; border-radius: 10px; border-right: 3px solid var(--accent-orange);">
                <i class="fas fa-file-pdf" style="color: var(--accent-orange); margin-bottom: 8px; font-size: 1.2rem;"></i>
                <div style="font-weight: bold;">Ù…Ù„Ø®ØµØ§Øª ÙˆÙ…Ù„ÙØ§Øª PDF</div>
              </div>
              <div style="background-color: #2a2a2a; padding: 15px; border-radius: 10px; border-right: 3px solid var(--accent-orange);">
                <i class="fas fa-question-circle" style="color: var(--accent-orange); margin-bottom: 8px; font-size: 1.2rem;"></i>
                <div style="font-weight: bold;">ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ©</div>
              </div>
            </div>
          </div>
          
          <div class="sidebar">
            <div class="activation-section">
              <h3 class="section-title" style="color: white; font-size: 1.3rem; margin-bottom: 15px;">
                <i class="fas fa-key"></i> ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³
              </h3>
              
              <input type="text" id="codeInput" class="code-input" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„" dir="ltr" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border-dark); background-color: #2a2a2a; color: white; margin-bottom: 15px;">
              
              <button class="btn" onclick="checkCode()" style="width: 60%;">
                <i class="fas fa-check"></i> ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ù„Ø¢Ù†
              </button>
              
              <div id="msg" class="message"></div>
            </div>
          </div>
        </div>
      `;
      
      // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„Ø¬ÙˆØ§Ù„
      setupMobileMenu();
    }



    window.checkCode = async function () {
      const code = document.getElementById("codeInput").value.trim();
      const msg = document.getElementById("msg");

      const studentData = JSON.parse(localStorage.getItem("studentData"));
      if (!studentData) { 
        msg.innerHTML = `<div class="message error"><i class="fas fa-exclamation-triangle"></i> Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨. ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.</div>`;
        return; 
      }

      msg.innerHTML = `<div style="text-align:center;"><i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯...</div>`;

      setTimeout(async () => {
        const q = query(
          collection(db, "codes"),
          where("courseId", "==", courseId),
          where("code", "==", code)
        );

        const snap = await getDocs(q);
        if (snap.empty) { 
          msg.innerHTML = `<div class="message error"><i class="fas fa-times-circle"></i> Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.</div>`;
          return; 
        }

        const docRef = snap.docs[0].ref;
        const data = snap.docs[0].data();

        if (data.isUsed && data.usedBy && data.usedBy.studentId === studentData.studentId) {
          msg.innerHTML = `<div class="message error"><i class="fas fa-info-circle"></i> Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ±Ø³ Ù…Ø³Ø¨Ù‚Ø§Ù‹.</div>`;
          return;
        }

        if (data.isUsed && (!data.usedBy || data.usedBy.studentId !== studentData.studentId)) {
          msg.innerHTML = `<div class="message error"><i class="fas fa-ban"></i> Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ù‚Ø¨Ù„ Ø·Ø§Ù„Ø¨ Ø¢Ø®Ø±.</div>`;
          return;
        }

        await updateDoc(docRef, {
          isUsed: true,
          usedBy: {
            name: studentData.name,
            parentPhone: studentData.parentPhone,
            school: studentData.school,
            studentId: studentData.studentId,
            id: snap.docs[0].id
          },
          usedAt: new Date().toISOString()
        });
     localStorage.setItem("studentCodeDocId", snap.docs[0].id);

        msg.innerHTML = `<div class="message success"><i class="fas fa-check-circle"></i> ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³ Ø¨Ù†Ø¬Ø§Ø­! Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰...</div>`;

        setTimeout(() => {
          showCourseContent();
        }, 1500);
      }, 1000);
    };

    function showCourseContent() {
      document.getElementById("courseBox").style.display = "none";
      document.getElementById("contentBox").style.display = "block";
      
      const d = courseData;
      
      // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚Ø¯Ù…
      const totalLectures = d.lectures ? d.lectures.length : 0;
      const completedLectures = studentProgress.completedLectures ? studentProgress.completedLectures.length : 0;
      const progressPercentage = totalLectures > 0 ? Math.round((completedLectures / totalLectures) * 100) : 0;
      
      // Ø¥Ù†Ø´Ø§Ø¡ HTML Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª
      let lecturesHTML = "";
      if (d.lectures && d.lectures.length > 0) {
        d.lectures.forEach((lecture, index) => {
          const isCompleted = studentProgress.completedLectures && studentProgress.completedLectures.includes(index);
          const isPreviousCompleted = index === 0 || (studentProgress.completedLectures && studentProgress.completedLectures.includes(index - 1));
          const isUnlocked = index === 0 || isPreviousCompleted;
          const hasQuiz = lecture.quiz && lecture.quiz.length > 0;
          
          let statusClass = "status-locked";
          let statusText = "Ù…Ù‚ÙÙ„";
          
          if (isCompleted) {
            statusClass = "status-unlocked";
            statusText = "Ù…ÙƒØªÙ…Ù„";
          } else if (isUnlocked) {
            statusClass = "status-quiz";
            statusText = "Ø¬Ø§Ù‡Ø²";
          }
          
          lecturesHTML += `
            <div class="lecture-card ${isUnlocked ? '' : 'locked'} ${isCompleted ? 'completed' : ''}" 
                 onclick="${isUnlocked ? `selectLecture(${index})` : ''}">
              <div class="lecture-number">${index + 1}</div>
              <h3 class="lecture-card-title">${lecture.title}</h3>
              <div class="lecture-meta">
                <div class="lecture-status ${statusClass}">${statusText}</div>
              </div>
            </div>
          `;
        });
      }
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
      document.getElementById("contentBox").innerHTML = `
        <div class="course-container">
          <div class="main-content">
            <div class="course-header">
              <div class="course-image">
                <img src="${d.image || 'https://via.placeholder.com/400x250/1a0a0a/FF6B35?text=Ù…Ø³ØªØ±+Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡+Ø§Ù„Ø³ÙŠØ¯'}" alt="${d.title}">
              </div>
              <div class="course-info">
                <h1 class="course-title">${d.title}</h1>
                <p class="course-description">${d.description || 'ÙƒÙˆØ±Ø³ ØªØ¹Ù„ÙŠÙ…ÙŠ Ù…ØªÙƒØ§Ù…Ù„ ÙŠØ´Ø±Ø­ Ø§Ù„Ù…Ù†Ù‡Ø¬ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ù…Ø¨Ø³Ø· ÙˆØ³Ù‡Ù„'}</p>
                
                <div class="progress-container">
                  <div class="progress-text">
                    <span>ØªÙ‚Ø¯Ù…Ùƒ ÙÙŠ Ø§Ù„ÙƒÙˆØ±Ø³</span>
                    <span>${completedLectures}/${totalLectures} Ù…Ø­Ø§Ø¶Ø±Ø§Øª (${progressPercentage}%)</span>
                  </div>
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: ${progressPercentage}%"></div>
                  </div>
                </div>
              </div>
            </div>
            
            <div style="margin: 25px 0;">
              <h3 class="la" style="color: var(--accent-light-orange); font-size: 1.4rem; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid var(--accent-orange);">
                <i class="fas fa-list-ol"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª
              </h3>
              
              ${d.lectures && d.lectures.length > 0 ? `
                <div class="lectures-list">
                  ${lecturesHTML}
                </div>
              ` : `
                <div class="message info">
                  <i class="fas fa-info-circle"></i>
                  <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ±Ø³ Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
                </div>
              `}
            </div>
          </div>
          
          <div class="sidebar">
            <h3 style="color: var(--accent-light-orange); font-size: 1.3rem; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid var(--accent-orange);">
              <i class="fas fa-info-circle"></i> Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙƒÙˆØ±Ø³
            </h3>
            
            <div style="background-color: #2a2a2a; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                <span><i class="fas fa-chalkboard-teacher"></i> Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª:</span>
                <span style="color: var(--accent-orange); font-weight: bold;">${totalLectures}</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                <span><i class="fas fa-video"></i> Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª:</span>
                <span style="color: var(--accent-orange); font-weight: bold;">${totalLectures}</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                <span><i class="fas fa-file-pdf"></i> Ù…Ù„ÙØ§Øª PDF:</span>
                <span style="color: var(--accent-orange); font-weight: bold;">${d.lectures ? d.lectures.filter(l => l.pdfLink).length : 0}</span>
              </div>
              <div style="display: flex; justify-content: space-between;">
                <span><i class="fas fa-question-circle"></i> Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª:</span>
                <span style="color: var(--accent-orange); font-weight: bold;">
                  ${d.lectures ? d.lectures.reduce((total, lec) => total + (lec.quiz ? lec.quiz.length : 0), 0) : 0}
                </span>
              </div>
            </div>
            
            <h3 style="color: var(--accent-light-orange); font-size: 1.3rem; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid var(--accent-orange);">
              <i class="fas fa-graduation-cap"></i> Ù†ØµØ§Ø¦Ø­ Ù…Ø³ØªØ± Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡
            </h3>
            
            <div style="background-color: #2a2a2a; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
              <p style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-check-circle" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>ÙŠØ¬Ø¨ Ø­Ù„ Ø§Ù„ÙƒÙˆÙŠØ² Ù‚Ø¨Ù„ ÙƒÙ„ Ù…Ø­Ø§Ø¶Ø±Ø© Ù„ÙØªØ­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</span>
              </p>
              <p style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-check-circle" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>Ø´Ø§Ù‡Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø¨ØªØ±ÙƒÙŠØ² ÙˆØ®Ø° Ù…Ù„Ø§Ø­Ø¸Ø§Øª</span>
              </p>
              <p style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-check-circle" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>Ø§Ø³ØªØ®Ø¯Ù… Ù…Ù„ÙØ§Øª PDF Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</span>
              </p>
              <p style="display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-check-circle" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>Ø­Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</span>
              </p>
            </div>
            
            <div style="text-align: center; margin-top: 25px;">
              <div style="background: linear-gradient(135deg, #1A0A0A, #2A1A0A); padding: 15px; border-radius: 10px; border: 1px solid var(--accent-orange);">
                <p style="color: var(--gold); font-weight: bold; margin-bottom: 8px;">Ù…Ø³ØªØ± Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø³ÙŠØ¯</p>
                <p style="font-size: 0.9rem; opacity: 0.9;">Ø®Ø¨ÙŠØ± Ù…Ù†Ù‡Ø¬ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡</p>
              </div>
            </div>
          </div>
        </div>
      `;
      
      // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„Ø¬ÙˆØ§Ù„
      setupMobileMenu();
    }

    // Ø§Ø®ØªÙŠØ§Ø± Ù…Ø­Ø§Ø¶Ø±Ø©
    window.selectLecture = function(lectureIndex) {
      currentLectureIndex = lectureIndex;
      const lecture = courseData.lectures[lectureIndex];
      
      // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ÙƒÙˆÙŠØ² Ù„Ù„Ù…Ø­Ø§Ø¶Ø±Ø©
      const hasQuiz = lecture.quiz && lecture.quiz.length > 0;
      const quizCompleted = studentProgress.quizResults && studentProgress.quizResults[lectureIndex] === true;
      
      if (hasQuiz && !quizCompleted) {
        // Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆÙŠØ² Ø£ÙˆÙ„Ø§Ù‹
        showQuiz(lectureIndex);
      } else {
        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
        showLecture(lectureIndex);
      }
    };

    // Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆÙŠØ²
    function showQuiz(lectureIndex) {
      const lecture = courseData.lectures[lectureIndex];
      const quiz = lecture.quiz;
      
      if (!quiz || quiz.length === 0) {
        showLecture(lectureIndex);
        return;
      }
      
      // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ÙƒÙˆÙŠØ²
      quizAnswers = new Array(quiz.length).fill(null);
      currentQuizIndex = 0;
      
      document.getElementById("contentBox").style.display = "none";
      document.getElementById("lectureBox").style.display = "block";
      
      // Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙƒÙˆÙŠØ²
      document.getElementById("lectureBox").innerHTML = `
        <div class="course-container">
          <div class="main-content">
            <div class="quiz-page active">
              <div class="quiz-header">
                <h2 style="color: var(--accent-light-orange); margin-bottom: 10px;">
                  <i class="fas fa-question-circle"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© ${lectureIndex + 1}
                </h2>
                <p style="color: var(--text-light);">${lecture.title}</p>
                <p style="margin-top: 10px; font-size: 0.9rem; color: var(--text-light);">
                  ÙŠØ¬Ø¨ Ø­Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ù„ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©
                </p>
              </div>
              
              <div class="quiz-progress">
                <div>
                  <strong>Ø§Ù„Ø³Ø¤Ø§Ù„:</strong> <span id="currentQuestion">1</span> / <span id="totalQuestions">${quiz.length}</span>
                </div>
                <div>
                  <strong>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª:</strong> <span id="answeredCount">0</span> / <span id="totalQuestions2">${quiz.length}</span>
                </div>
              </div>
              
              <div id="quizContent">
                <!-- Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒÙˆÙŠØ² Ù‡Ù†Ø§ -->
              </div>
              
              <div class="quiz-navigation">
                <button class="btn btn-outline" id="prevQuestion" onclick="changeQuizQuestion(-1)" disabled>
                  <i class="fas fa-arrow-right"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
                </button>
                <button class="btn" id="nextQuestion" onclick="changeQuizQuestion(1)">
                  Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-arrow-left"></i>
                </button>
              </div>
              
              <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="submitQuiz" onclick="submitQuiz(${lectureIndex})" style="display: none;">
                  <i class="fas fa-paper-plane"></i> ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
                </button>
              </div>
            </div>
          </div>
          
          <div class="sidebar">
           
            
            <h3 style="color: var(--accent-light-orange); font-size: 1.3rem; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid var(--accent-orange);">
              <i class="fas fa-info-circle"></i> ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            </h3>
            
            <div style="background-color: #2a2a2a; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
              <p style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-check-circle" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„</span>
              </p>
              <p style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-check-circle" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ù‚Ø¨Ù„ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</span>
              </p>
              <p style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-check-circle" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>ÙŠØ¬Ø¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</span>
              </p>
              <p style="display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-check-circle" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>ÙŠØ¬Ø¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„ÙØªØ­ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©</span>
              </p>
            </div>
            
            <div style="text-align: center; margin-top: 25px;">
              <button class="btn btn-outline" onclick="cancelQuiz()">
                <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡ ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
              </button>
            </div>
          </div>
        </div>
      `;
      
      // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„Ø¬ÙˆØ§Ù„
      setupMobileMenu();
      
      // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
      const closeSidebar = document.getElementById('closeSidebar');
      if (closeSidebar) {
        closeSidebar.addEventListener('click', function() {
          document.querySelector('.sidebar').classList.remove('active');
          overlay.classList.remove('active');
        });
      }
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„
      updateQuizDisplay();
    }

    // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆÙŠØ²
    function updateQuizDisplay() {
      const lecture = courseData.lectures[currentLectureIndex];
      const quiz = lecture.quiz;
      const currentQuestion = quiz[currentQuizIndex];
      
      if (!currentQuestion) return;
      
      document.getElementById("currentQuestion").textContent = currentQuizIndex + 1;
      document.getElementById("totalQuestions").textContent = quiz.length;
      document.getElementById("totalQuestions2").textContent = quiz.length;
      
      // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
      const answeredCount = quizAnswers.filter(answer => answer !== null).length;
      document.getElementById("answeredCount").textContent = answeredCount;
      
      // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
      document.getElementById("prevQuestion").disabled = currentQuizIndex === 0;
      document.getElementById("nextQuestion").style.display = currentQuizIndex < quiz.length - 1 ? "inline-flex" : "none";
      document.getElementById("submitQuiz").style.display = answeredCount === quiz.length ? "inline-flex" : "none";
      
      // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø³Ø¤Ø§Ù„
      const quizContent = document.getElementById("quizContent");
      quizContent.innerHTML = `
        <div class="quiz-question">
          ${currentQuestion.questionImage ? `
            <img src="${currentQuestion.questionImage}" class="quiz-question-image" alt="ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„">
          ` : ""}
          
          <div class="quiz-question-text">
            Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentQuizIndex + 1}: ${currentQuestion.questionText || "Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©"}
          </div>
          
          <div class="quiz-options">
            ${currentQuestion.options.map((option, index) => `
              <div class="quiz-option ${quizAnswers[currentQuizIndex] === index ? 'selected' : ''}" 
                   onclick="selectQuizAnswer(${index})">
                ${option.text}
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    // ØªØºÙŠÙŠØ± Ø³Ø¤Ø§Ù„ Ø§Ù„ÙƒÙˆÙŠØ²
    window.changeQuizQuestion = function(direction) {
      const lecture = courseData.lectures[currentLectureIndex];
      const quiz = lecture.quiz;
      
      currentQuizIndex += direction;
      if (currentQuizIndex < 0) currentQuizIndex = 0;
      if (currentQuizIndex >= quiz.length) currentQuizIndex = quiz.length - 1;
      
      updateQuizDisplay();
    }

    // Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø§Ø¨Ø© ÙÙŠ Ø§Ù„ÙƒÙˆÙŠØ²
    window.selectQuizAnswer = function(answerIndex) {
      quizAnswers[currentQuizIndex] = answerIndex;
      updateQuizDisplay();
    }


window.submitQuiz = async function (lectureIndex) {
  const lecture = courseData.lectures[lectureIndex];
  const quiz = lecture.quiz;

  let results = [];
  let correctCount = 0;

  for (let i = 0; i < quiz.length; i++) {
    const q = quiz[i];
    const studentAnswer = quizAnswers[i];
    const isCorrect = studentAnswer === q.correct;
    if (isCorrect) correctCount++;

    results.push({
      questionImage: q.questionImage || null,
      questionText: q.questionText || "",
      options: q.options.map(o => o.text),
      correctAnswerIndex: q.correct,
      studentAnswerIndex: studentAnswer,
      isCorrect: isCorrect
    });
  }

  // ğŸŸ¢ Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ù„ÙˆÙƒÙ„
  saveQuizToLocalStorage(lectureIndex, results, correctCount, quiz.length);

  alert(`Ù†ØªÙŠØ¬ØªÙƒ: ${correctCount} Ù…Ù† ${quiz.length}`);
  showLecture(lectureIndex);
};




  function saveQuizToLocalStorage(lectureIndex, results, correctCount, totalQuestions) {
  const quizKey = `quizResult_lecture_${lectureIndex}`;

  const quizData = {
    lectureIndex,
    correct: correctCount,
    totalQuestions,
    results,
    savedAt: new Date().toISOString()
  };

  localStorage.setItem(quizKey, JSON.stringify(quizData));

  console.log("âœ” ØªÙ… Ø­ÙØ¸ Ù†ØªÙŠØ¬Ø© Ø§Ù„ÙƒÙˆÙŠØ² ÙÙŠ Ø§Ù„Ù„ÙˆÙƒÙ„ Ø³ØªÙˆØ±Ø¬ Ø¨Ù†Ø¬Ø§Ø­");
}



    // Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ÙƒÙˆÙŠØ²
    window.retryQuiz = function(lectureIndex) {
      quizAnswers = new Array(courseData.lectures[lectureIndex].quiz.length).fill(null);
      currentQuizIndex = 0;
      updateQuizDisplay();
    }

    // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒÙˆÙŠØ²
    window.cancelQuiz = function() {
      document.getElementById("lectureBox").style.display = "none";
      document.getElementById("contentBox").style.display = "block";
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ ID Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø±Ø§Ø¨Ø· Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨
    function getYouTubeEmbedUrl(youtubeUrl) {
      if (!youtubeUrl) return '';
      
      // Ø§Ø³ØªØ®Ø±Ø§Ø¬ ID Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
      let videoId = '';
      
      // Ù„Ø­Ø§Ù„Ø§Øª Ù…Ø®ØªÙ„ÙØ© Ù…Ù† Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙŠÙˆØªÙŠÙˆØ¨
      if (youtubeUrl.includes('youtu.be/')) {
        // Ø±ÙˆØ§Ø¨Ø· Ù…Ø®ØªØµØ±Ø©: https://youtu.be/R8IK61CsUMU
        videoId = youtubeUrl.split('youtu.be/')[1]?.split('?')[0];
      } else if (youtubeUrl.includes('youtube.com/watch?v=')) {
        // Ø±ÙˆØ§Ø¨Ø· Ø¹Ø§Ø¯ÙŠØ©: https://www.youtube.com/watch?v=R8IK61CsUMU
        videoId = youtubeUrl.split('v=')[1]?.split('&')[0];
      } else if (youtubeUrl.includes('youtube.com/embed/')) {
        // Ø±ÙˆØ§Ø¨Ø· embed: https://www.youtube.com/embed/R8IK61CsUMU
        videoId = youtubeUrl.split('embed/')[1]?.split('?')[0];
      } else if (youtubeUrl.includes('youtube.com/v/')) {
        // Ø±ÙˆØ§Ø¨Ø· Ù‚Ø¯ÙŠÙ…Ø©: https://www.youtube.com/v/R8IK61CsUMU
        videoId = youtubeUrl.split('v/')[1]?.split('?')[0];
      }
      
      // ØªÙ†Ø¸ÙŠÙ ID Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
      if (videoId && videoId.length === 11) {
        return `https://www.youtube.com/embed/${videoId}`;
      }
      
      return ''; // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ ID ØµØ§Ù„Ø­
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© Ø¨Ø¹Ø¯ Ø§Ø¬ØªÙŠØ§Ø² Ø§Ù„ÙƒÙˆÙŠØ²
    function showLecture(lectureIndex) {
      const lecture = courseData.lectures[lectureIndex];
      
      document.getElementById("lectureBox").style.display = "block";
      document.getElementById("contentBox").style.display = "none";
      
      // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© ÙƒÙ…ÙƒØªÙ…Ù„Ø©
      if (!studentProgress.completedLectures.includes(lectureIndex)) {
        studentProgress.completedLectures.push(lectureIndex);
        const progressKey = `course_${courseId}_progress`;
        localStorage.setItem(progressKey, JSON.stringify(studentProgress));
      }
      
      // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
      const lectureVideoUrl = getYouTubeEmbedUrl(lecture.videoLink);
      const homeworkVideoUrl = getYouTubeEmbedUrl(lecture.homeworkVideo);
      
      // Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©
      document.getElementById("lectureBox").innerHTML = `
        <div class="course-container">
          <div class="main-content">
            <div class="lecture-page active">
              <div class="lecture-header">
                <div>
                  <h2 class="lecture-title" style="color: var(--accent-light-orange); margin-bottom: 5px;">
                    <i class="fas fa-chalkboard-teacher"></i> Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© ${lectureIndex + 1}: ${lecture.title}
                  </h2>
                </div>
                <button class="back-to-list" onclick="backToLecturesList()">
                  <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
                </button>
              </div>
              
              <!-- Ø¹Ù„Ø§Ù…Ø§Øª ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
              <div class="video-tabs" id="videoTabs">
                <div class="video-tab active" onclick="switchVideoTab('lecture')">
                  <i class="fas fa-play-circle"></i> ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø´Ø±Ø­
                </div>
                ${lecture.homeworkVideo ? `
                  <div class="video-tab" onclick="switchVideoTab('homework')">
                    <i class="fas fa-tasks"></i> ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ÙˆØ§Ø¬Ø¨
                  </div>
                ` : ''}
                 ${lecture.pdfLink ? `
                  <a href="${lecture.pdfLink}" target="_blank" class="resource-link">
                    <i class="fas fa-chalkboard"></i> Ø§Ù„ØµØ¨ÙˆØ±Ù‡  
                  </a>
                ` : ''}
              </div>
              
              <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
              <div class="video-container">
                <iframe 
                  id="mainVideoFrame"
                  width="100%" 
                  height="100%" 
                  src="${lectureVideoUrl || 'https://www.youtube.com/embed/dQw4w9WgXcQ'}" 
                  frameborder="0" 
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                  allowfullscreen
                  title="ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©"
                >
                </iframe>
                
                ${lecture.homeworkVideo ? `
                  <iframe 
                    id="homeworkVideoFrame"
                    width="100%" 
                    height="100%" 
                    src="${homeworkVideoUrl}" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen
                    title="ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ÙˆØ§Ø¬Ø¨"
                    style="display: none;"
                  >
                  </iframe>
                ` : ''}
              </div>
              
              <div class="lecture-resources">
               
                
                ${lecture.images && lecture.images.length > 0 ? `
                  <a href="#" class="resource-link" onclick="showLectureImages(${lectureIndex}); return false;">
                    <i class="fas fa-images"></i> ØµÙˆØ± Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©
                  </a>
                ` : ''}
              </div>
              
              ${lecture.description ? `
                <div style="background-color: #1f1f1f; border-radius: 12px; padding: 20px; margin-top: 20px; border: 1px solid var(--border-dark);">
                  <h3 style="color: var(--text-white); margin-bottom: 10px;">
                    <i class="fas fa-info-circle"></i> ÙˆØµÙ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©
                  </h3>
                  <p style="color: var(--text-light);">${lecture.description}</p>
                </div>
              ` : ''}
            </div>
          </div>
          
          <div class="sidebar">
            
            
            
            <h3 style="color: var(--accent-light-orange); font-size: 1.3rem; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid var(--accent-orange);">
              <i class="fas fa-lightbulb"></i> Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©
            </h3>
            
            <div style="background-color: #2a2a2a; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
              <p style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-star" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>Ø´Ø§Ù‡Ø¯ ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø´Ø±Ø­ Ø£ÙˆÙ„Ø§Ù‹ Ø¨ØªØ±ÙƒÙŠØ²</span>
              </p>
              <p style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-star" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>Ø«Ù… Ø´Ø§Ù‡Ø¯ ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ÙˆØ§Ø¬Ø¨ Ù„Ø­Ù„ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</span>
              </p>
              <p style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-star" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>Ø­Ù…Ù„ Ù…Ù„Ù PDF Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</span>
              </p>
              <p style="display: flex; align-items: flex-start; gap: 10px;">
                <i class="fas fa-star" style="color: var(--accent-orange); margin-top: 3px;"></i>
                <span>Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</span>
              </p>
            </div>
            
            <div style="text-align: center; margin-top: 25px;">
             
            </div>
          </div>
        </div>
      `;
      
      // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„Ø¬ÙˆØ§Ù„
      setupMobileMenu();
      
      // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
      const closeSidebar = document.getElementById('closeSidebar');
      if (closeSidebar) {
        closeSidebar.addEventListener('click', function() {
          document.querySelector('.sidebar').classList.remove('active');
          overlay.classList.remove('active');
        });
      }
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø´Ø±Ø­ ÙˆÙÙŠØ¯ÙŠÙˆ Ø§Ù„ÙˆØ§Ø¬Ø¨
    window.switchVideoTab = function(tabType) {
      currentVideoType = tabType;
      
      // ØªØ­Ø¯ÙŠØ« Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ø´Ø·Ø©
      const tabs = document.querySelectorAll('.video-tab');
      tabs.forEach(tab => {
        if (tab.textContent.includes(tabType === 'lecture' ? 'Ø§Ù„Ø´Ø±Ø­' : 'Ø§Ù„ÙˆØ§Ø¬Ø¨')) {
          tab.classList.add('active');
        } else {
          tab.classList.remove('active');
        }
      });
      
      // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
      const mainVideoFrame = document.getElementById('mainVideoFrame');
      const homeworkVideoFrame = document.getElementById('homeworkVideoFrame');
      
      if (tabType === 'lecture') {
        if (mainVideoFrame) mainVideoFrame.style.display = 'block';
        if (homeworkVideoFrame) homeworkVideoFrame.style.display = 'none';
      } else if (tabType === 'homework') {
        if (mainVideoFrame) mainVideoFrame.style.display = 'none';
        if (homeworkVideoFrame) homeworkVideoFrame.style.display = 'block';
      }
    }

    // Ø¹Ø±Ø¶ ØµÙˆØ± Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø©
    window.showLectureImages = function(lectureIndex) {
      const lecture = courseData.lectures[lectureIndex];
      
      if (!lecture.images || lecture.images.length === 0) return;
      
      const imagesHTML = lecture.images.map(img => `
        <div style="margin-bottom: 15px;">
          <img src="${img}" style="width: 100%; border-radius: 8px; border: 2px solid var(--border-dark);">
        </div>
      `).join('');
      
      // Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± ÙÙŠ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
      document.getElementById("lectureBox").innerHTML += `
        <div id="imagesModal" style="position: fixed; top: 0; right: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); z-index: 2000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px;">
          <div style="background-color: var(--secondary-black); border-radius: 15px; padding: 20px; max-width: 800px; width: 100%; max-height: 90vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
              <h3 style="color: var(--accent-light-orange);">
                <i class="fas fa-images"></i> ØµÙˆØ± Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© ${lectureIndex + 1}
              </h3>
              <button onclick="closeImagesModal()" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div>
              ${imagesHTML}
            </div>
            <div style="text-align: center; margin-top: 20px;">
              <button class="btn" onclick="closeImagesModal()">
                <i class="fas fa-times"></i> Ø¥ØºÙ„Ø§Ù‚
              </button>
            </div>
          </div>
        </div>
      `;
    }

    // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØµÙˆØ±
    window.closeImagesModal = function() {
      const modal = document.getElementById("imagesModal");
      if (modal) {
        modal.remove();
      }
    }

    // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª
    window.backToLecturesList = function() {
      document.getElementById("lectureBox").style.display = "none";
      document.getElementById("contentBox").style.display = "block";
      showCourseContent(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
    }

    // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© ÙƒÙ…ÙƒØªÙ…Ù„Ø©
    window.markAsCompleted = function(lectureIndex) {
      if (!studentProgress.completedLectures.includes(lectureIndex)) {
        studentProgress.completedLectures.push(lectureIndex);
        const progressKey = `course_${courseId}_progress`;
        localStorage.setItem(progressKey, JSON.stringify(studentProgress));
        
        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯
        alert("ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø© ÙƒÙ…ÙƒØªÙ…Ù„Ø©!");
        backToLecturesList();
      }
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³ Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØµÙØ­Ø©
    loadCourse();
  </script>
</body>
</html>